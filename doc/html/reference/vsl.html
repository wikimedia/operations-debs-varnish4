
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>VSL &#8212; Varnish version 6.0.7 documentation</title>
    <link rel="stylesheet" href="../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="vsl-query" href="vsl-query.html" />
    <link rel="prev" title="varnish-counters" href="varnish-counters.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="vsl-query.html" title="vsl-query"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="varnish-counters.html" title="varnish-counters"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Varnish version 6.0.7 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">The Varnish Reference Manual</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="vsl">
<span id="vsl-7"></span><h1>VSL<a class="headerlink" href="#vsl" title="Permalink to this headline">¶</a></h1>
<div class="section" id="varnish-shared-memory-logging">
<h2>Varnish Shared Memory Logging<a class="headerlink" href="#varnish-shared-memory-logging" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Manual section:</th><td class="field-body">7</td>
</tr>
</tbody>
</table>
<div class="section" id="overview">
<h3>OVERVIEW<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h3>
<p>This document describes the format and content of all the Varnish shared memory
logging tags. These tags are used by the varnishlog(1), varnishtop(1), etc.
logging tools supplied with Varnish.</p>
<div class="section" id="vsl-tags">
<h4>VSL tags<a class="headerlink" href="#vsl-tags" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Backend - Backend selected</dt>
<dd><p class="first">Logged when a connection is selected for handling a backend request.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Backend</span> <span class="n">display</span> <span class="n">name</span>
<span class="o">|</span>  <span class="o">+----</span> <span class="n">VCL</span> <span class="n">name</span>
<span class="o">+-------</span> <span class="n">Connection</span> <span class="n">file</span> <span class="n">descriptor</span>

<span class="n">NOTE</span><span class="p">:</span> <span class="n">This</span> <span class="n">tag</span> <span class="ow">is</span> <span class="n">currently</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">use</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">Varnish</span> <span class="n">log</span><span class="o">.</span>
<span class="n">It</span> <span class="ow">is</span> <span class="n">mentioned</span> <span class="n">here</span> <span class="n">to</span> <span class="n">document</span> <span class="n">legacy</span> <span class="n">versions</span> <span class="n">of</span> <span class="n">the</span> <span class="n">log</span><span class="p">,</span>
<span class="ow">or</span> <span class="n">reserved</span> <span class="k">for</span> <span class="n">possible</span> <span class="n">use</span> <span class="ow">in</span> <span class="n">future</span> <span class="n">versions</span><span class="o">.</span>
</pre></div>
</div>
</dd>
<dt>BackendClose - Backend connection closed</dt>
<dd><p class="first">Logged when a backend connection is closed.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">s</span> <span class="p">[</span> <span class="o">%</span><span class="n">s</span> <span class="p">]</span>
<span class="o">|</span>  <span class="o">|</span>    <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>    <span class="o">+-</span> <span class="n">Optional</span> <span class="n">reason</span>
<span class="o">|</span>  <span class="o">+------</span> <span class="n">Backend</span> <span class="n">display</span> <span class="n">name</span>
<span class="o">+---------</span> <span class="n">Connection</span> <span class="n">file</span> <span class="n">descriptor</span>
</pre></div>
</div>
</dd>
<dt>BackendOpen - Backend connection opened</dt>
<dd><p class="first">Logged when a new backend connection is opened.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Local</span> <span class="n">port</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----</span> <span class="n">Local</span> <span class="n">address</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------</span> <span class="n">Remote</span> <span class="n">port</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------</span> <span class="n">Remote</span> <span class="n">address</span>
<span class="o">|</span>  <span class="o">+-------------</span> <span class="n">Backend</span> <span class="n">display</span> <span class="n">name</span>
<span class="o">+----------------</span> <span class="n">Connection</span> <span class="n">file</span> <span class="n">descriptor</span>
</pre></div>
</div>
</dd>
<dt>BackendReuse - Backend connection put up for reuse</dt>
<dd><p class="first">Logged when a backend connection is put up for reuse by a later connection.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+-</span> <span class="n">Backend</span> <span class="n">display</span> <span class="n">name</span>
<span class="o">+----</span> <span class="n">Connection</span> <span class="n">file</span> <span class="n">descriptor</span>
</pre></div>
</div>
</dd>
<dt>BackendStart - Backend request start</dt>
<dd><p class="first">Start of backend processing. Logs the backend IP address and port number.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+-</span> <span class="n">Backend</span> <span class="n">Port</span> <span class="n">number</span>
<span class="o">+----</span> <span class="n">Backend</span> <span class="n">IP4</span><span class="o">/</span><span class="mi">6</span> <span class="n">address</span>
</pre></div>
</div>
</dd>
<dt>Backend_health - Backend health check</dt>
<dd><p class="first">The result of a backend health probe.</p>
<p>The format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">u</span> <span class="o">%</span><span class="n">u</span> <span class="o">%</span><span class="n">u</span> <span class="o">%</span><span class="n">f</span> <span class="o">%</span><span class="n">f</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Probe</span> <span class="n">HTTP</span> <span class="n">response</span> <span class="o">/</span> <span class="n">error</span> <span class="n">information</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----</span> <span class="n">Average</span> <span class="n">response</span> <span class="n">time</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------</span> <span class="n">Response</span> <span class="n">time</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------</span> <span class="n">Probe</span> <span class="n">window</span> <span class="n">size</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------------</span> <span class="n">Probe</span> <span class="n">threshold</span> <span class="n">level</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------------</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">good</span> <span class="n">probes</span> <span class="ow">in</span> <span class="n">window</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------------------</span> <span class="n">Probe</span> <span class="n">window</span> <span class="n">bits</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------------------</span> <span class="s2">&quot;healthy&quot;</span> <span class="ow">or</span> <span class="s2">&quot;sick&quot;</span>
<span class="o">|</span>  <span class="o">+-------------------------</span> <span class="s2">&quot;Back&quot;</span><span class="p">,</span> <span class="s2">&quot;Still&quot;</span> <span class="ow">or</span> <span class="s2">&quot;Went&quot;</span>
<span class="o">+----------------------------</span> <span class="n">Backend</span> <span class="n">name</span>
</pre></div>
</div>
<p>Probe window bits are:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;4&#39;</span><span class="p">:</span> <span class="n">Good</span> <span class="n">IPv4</span>
<span class="s1">&#39;6&#39;</span><span class="p">:</span> <span class="n">Good</span> <span class="n">IPv6</span>
<span class="s1">&#39;U&#39;</span><span class="p">:</span> <span class="n">Good</span> <span class="n">UNIX</span>
<span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">Error</span> <span class="n">Xmit</span>
<span class="s1">&#39;X&#39;</span><span class="p">:</span> <span class="n">Good</span> <span class="n">Xmit</span>
<span class="s1">&#39;r&#39;</span><span class="p">:</span> <span class="n">Error</span> <span class="n">Recv</span>
<span class="s1">&#39;R&#39;</span><span class="p">:</span> <span class="n">Good</span> <span class="n">Recv</span>
<span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="n">Happy</span>
</pre></div>
</div>
</dd>
<dt>Begin - Marks the start of a VXID</dt>
<dd><p class="first">The first record of a VXID transaction.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Reason</span>
<span class="o">|</span>  <span class="o">+----</span> <span class="n">Parent</span> <span class="n">vxid</span>
<span class="o">+-------</span> <span class="n">Type</span> <span class="p">(</span><span class="s2">&quot;sess&quot;</span><span class="p">,</span> <span class="s2">&quot;req&quot;</span> <span class="ow">or</span> <span class="s2">&quot;bereq&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>BereqAcct - Backend request accounting</dt>
<dd><p class="first">Contains byte counters from backend request processing.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Total</span> <span class="nb">bytes</span> <span class="n">received</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----</span> <span class="n">Body</span> <span class="nb">bytes</span> <span class="n">received</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------</span> <span class="n">Header</span> <span class="nb">bytes</span> <span class="n">received</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------</span> <span class="n">Total</span> <span class="nb">bytes</span> <span class="n">transmitted</span>
<span class="o">|</span>  <span class="o">+-------------</span> <span class="n">Body</span> <span class="nb">bytes</span> <span class="n">transmitted</span>
<span class="o">+----------------</span> <span class="n">Header</span> <span class="nb">bytes</span> <span class="n">transmitted</span>
</pre></div>
</div>
</dd>
<dt>BereqHeader - Backend request header</dt>
<dd><p class="first">HTTP header contents.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span><span class="p">:</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">+-</span> <span class="n">Header</span> <span class="n">value</span>
<span class="o">+-----</span> <span class="n">Header</span> <span class="n">name</span>
</pre></div>
</div>
</dd>
<dt>BereqMethod - Backend request method</dt>
<dd>The HTTP request method used.</dd>
<dt>BereqProtocol - Backend request protocol</dt>
<dd>The HTTP protocol version information.</dd>
<dt>BereqURL - Backend request URL</dt>
<dd>The HTTP request URL.</dd>
<dt>BerespHeader - Backend response header</dt>
<dd><p class="first">HTTP header contents.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span><span class="p">:</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">+-</span> <span class="n">Header</span> <span class="n">value</span>
<span class="o">+-----</span> <span class="n">Header</span> <span class="n">name</span>
</pre></div>
</div>
</dd>
<dt>BerespProtocol - Backend response protocol</dt>
<dd>The HTTP protocol version information.</dd>
<dt>BerespReason - Backend response response</dt>
<dd>The HTTP response string received.</dd>
<dt>BerespStatus - Backend response status</dt>
<dd>The HTTP status code received.</dd>
<dt>BogoHeader - Bogus HTTP received</dt>
<dd>Contains the first 20 characters of received HTTP headers we could not make sense of.  Applies to both req.http and beresp.http.</dd>
<dt>CLI - CLI communication</dt>
<dd>CLI communication between varnishd master and child process.</dd>
<dt>Debug - Debug messages</dt>
<dd><p class="first">Debug messages can normally be ignored, but are sometimes helpful during trouble-shooting.  Most debug messages must be explicitly enabled with parameters.</p>
<p class="last">Debug messages may be added, changed or removed without prior notice and shouldn’t be considered stable.</p>
</dd>
<dt>ESI_xmlerror - ESI parser error or warning message</dt>
<dd>An error or warning was generated during parsing of an ESI object. The log record describes the problem encountered.</dd>
<dt>End - Marks the end of a VXID</dt>
<dd>The last record of a VXID transaction.</dd>
<dt>Error - Error messages</dt>
<dd>Error messages are stuff you probably want to know.</dd>
<dt>ExpBan - Object evicted due to ban</dt>
<dd>Logs the VXID when an object is banned.</dd>
<dt>ExpKill - Object expiry event</dt>
<dd><p class="first">Logs events related to object expiry. The events are:</p>
<dl class="docutils">
<dt>EXP_Rearm</dt>
<dd>Logged when the expiry time of an object changes.</dd>
<dt>EXP_Inbox</dt>
<dd>Logged when the expiry thread picks an object from the inbox for processing.</dd>
<dt>EXP_Kill</dt>
<dd>Logged when the expiry thread kills an object from the inbox.</dd>
<dt>EXP_When</dt>
<dd>Logged when the expiry thread moves an object on the binheap.</dd>
<dt>EXP_Expired</dt>
<dd>Logged when the expiry thread expires an object.</dd>
<dt>LRU_Cand</dt>
<dd>Logged when an object is evaluated for LRU force expiry.</dd>
<dt>LRU</dt>
<dd>Logged when an object is force expired due to LRU.</dd>
<dt>LRU_Fail</dt>
<dd>Logged when no suitable candidate object is found for LRU force expiry.</dd>
</dl>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">EXP_Rearm</span> <span class="n">p</span><span class="o">=%</span><span class="n">p</span> <span class="n">E</span><span class="o">=%</span><span class="n">f</span> <span class="n">e</span><span class="o">=%</span><span class="n">f</span> <span class="n">f</span><span class="o">=</span><span class="mi">0</span><span class="n">x</span><span class="o">%</span><span class="n">x</span>
<span class="n">EXP_Inbox</span> <span class="n">p</span><span class="o">=%</span><span class="n">p</span> <span class="n">e</span><span class="o">=%</span><span class="n">f</span> <span class="n">f</span><span class="o">=</span><span class="mi">0</span><span class="n">x</span><span class="o">%</span><span class="n">x</span>
<span class="n">EXP_Kill</span> <span class="n">p</span><span class="o">=%</span><span class="n">p</span> <span class="n">e</span><span class="o">=%</span><span class="n">f</span> <span class="n">f</span><span class="o">=</span><span class="mi">0</span><span class="n">x</span><span class="o">%</span><span class="n">x</span>
<span class="n">EXP_When</span> <span class="n">p</span><span class="o">=%</span><span class="n">p</span> <span class="n">e</span><span class="o">=%</span><span class="n">f</span> <span class="n">f</span><span class="o">=</span><span class="mi">0</span><span class="n">x</span><span class="o">%</span><span class="n">x</span>
<span class="n">EXP_Expired</span> <span class="n">x</span><span class="o">=%</span><span class="n">u</span> <span class="n">t</span><span class="o">=%</span><span class="n">f</span>
<span class="n">LRU_Cand</span> <span class="n">p</span><span class="o">=%</span><span class="n">p</span> <span class="n">f</span><span class="o">=</span><span class="mi">0</span><span class="n">x</span><span class="o">%</span><span class="n">x</span> <span class="n">r</span><span class="o">=%</span><span class="n">d</span>
<span class="n">LRU</span> <span class="n">x</span><span class="o">=%</span><span class="n">u</span>
<span class="n">LRU_Fail</span>

<span class="n">Legend</span><span class="p">:</span>
<span class="n">p</span><span class="o">=%</span><span class="n">p</span>         <span class="n">Objcore</span> <span class="n">pointer</span>
<span class="n">t</span><span class="o">=%</span><span class="n">f</span>         <span class="n">Remaining</span> <span class="n">TTL</span> <span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="n">e</span><span class="o">=%</span><span class="n">f</span>         <span class="n">Expiry</span> <span class="n">time</span> <span class="p">(</span><span class="n">unix</span> <span class="n">epoch</span><span class="p">)</span>
<span class="n">E</span><span class="o">=%</span><span class="n">f</span>         <span class="n">Old</span> <span class="n">expiry</span> <span class="n">time</span> <span class="p">(</span><span class="n">unix</span> <span class="n">epoch</span><span class="p">)</span>
<span class="n">f</span><span class="o">=</span><span class="mi">0</span><span class="n">x</span><span class="o">%</span><span class="n">x</span>       <span class="n">Objcore</span> <span class="n">flags</span>
<span class="n">r</span><span class="o">=%</span><span class="n">d</span>         <span class="n">Objcore</span> <span class="n">refcount</span>
<span class="n">x</span><span class="o">=%</span><span class="n">u</span>         <span class="n">Object</span> <span class="n">VXID</span>
</pre></div>
</div>
</dd>
<dt>FetchError - Error while fetching object</dt>
<dd><p class="first">Logs the error message of a failed fetch operation.</p>
<p>Error messages should be self-explanatory, yet the http connection(HTC) class of errors is reported with these symbols:</p>
<blockquote>
<div><ul class="simple">
<li>junk (-5): Received unexpected data</li>
<li>close (-4): Connection closed</li>
<li>timeout (-3): Timed out</li>
<li>overflow (-2): Buffer/workspace too small</li>
<li>eof (-1): Unexpected end of input</li>
<li>empty (0): Empty response</li>
<li>more (1): More data required</li>
<li>complete (2): Data complete (no error)</li>
<li>idle (3): Connection was closed while idle</li>
</ul>
</div></blockquote>
<p class="last">Notice that some HTC errors are never emitted.</p>
</dd>
<dt>Fetch_Body - Body fetched from backend</dt>
<dd><p class="first">Ready to fetch body from backend.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">d</span> <span class="p">(</span><span class="o">%</span><span class="n">s</span><span class="p">)</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>   <span class="o">|</span>    <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>    <span class="o">+----</span> <span class="s1">&#39;stream&#39;</span> <span class="ow">or</span> <span class="s1">&#39;-&#39;</span>
<span class="o">|</span>   <span class="o">+---------</span> <span class="n">Text</span> <span class="n">description</span> <span class="n">of</span> <span class="n">body</span> <span class="n">fetch</span> <span class="n">mode</span>
<span class="o">+-------------</span> <span class="n">Body</span> <span class="n">fetch</span> <span class="n">mode</span>
</pre></div>
</div>
</dd>
<dt>Filters - Body filters</dt>
<dd><p class="first">List of filters applied to the body.</p>
<blockquote class="last">
<div>NOTE: This tag is currently not in use in the Varnish log.
It is mentioned here to document legacy versions of the log,
or reserved for possible use in future versions.</div></blockquote>
</dd>
<dt>Gzip - G(un)zip performed on object</dt>
<dd><p class="first">A Gzip record is emitted for each instance of gzip or gunzip work performed. Worst case, an ESI transaction stored in gzip’ed objects but delivered gunziped, will run into many of these.</p>
<p>The format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">c</span> <span class="o">%</span><span class="n">c</span> <span class="o">%</span><span class="n">c</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Bit</span> <span class="n">length</span> <span class="n">of</span> <span class="n">compressed</span> <span class="n">data</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----</span> <span class="n">Bit</span> <span class="n">location</span> <span class="n">of</span> <span class="s1">&#39;last&#39;</span> <span class="n">bit</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------</span> <span class="n">Bit</span> <span class="n">location</span> <span class="n">of</span> <span class="n">first</span> <span class="n">deflate</span> <span class="n">block</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------</span> <span class="n">Bytes</span> <span class="n">output</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------------</span> <span class="n">Bytes</span> <span class="nb">input</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------------</span> <span class="s1">&#39;E&#39;</span><span class="p">:</span> <span class="n">ESI</span><span class="p">,</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span> <span class="n">Plain</span> <span class="nb">object</span>
<span class="o">|</span>  <span class="o">+-------------------</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="n">Fetch</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">:</span> <span class="n">Deliver</span>
<span class="o">+----------------------</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span> <span class="n">Gzip</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">:</span> <span class="n">Gunzip</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">:</span> <span class="n">Gunzip</span><span class="o">-</span><span class="n">test</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">U</span> <span class="n">F</span> <span class="n">E</span> <span class="mi">182</span> <span class="mi">159</span> <span class="mi">80</span> <span class="mi">80</span> <span class="mi">1392</span>
<span class="n">G</span> <span class="n">F</span> <span class="n">E</span> <span class="mi">159</span> <span class="mi">173</span> <span class="mi">80</span> <span class="mi">1304</span> <span class="mi">1314</span>
</pre></div>
</div>
</dd>
<dt>H2RxBody - Received HTTP2 frame body</dt>
<dd>Binary data</dd>
<dt>H2RxHdr - Received HTTP2 frame header</dt>
<dd>Binary data</dd>
<dt>H2TxBody - Transmitted HTTP2 frame body</dt>
<dd>Binary data</dd>
<dt>H2TxHdr - Transmitted HTTP2 frame header</dt>
<dd>Binary data</dd>
<dt>Hash - Value added to hash</dt>
<dd><p class="first">This value was added to the object lookup hash.</p>
<p class="last">NB: This log record is masked by default.</p>
</dd>
<dt>Hit - Hit object in cache</dt>
<dd><p class="first">Object looked up in cache.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">u</span> <span class="o">%</span><span class="n">f</span> <span class="o">%</span><span class="n">f</span> <span class="o">%</span><span class="n">f</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Keep</span> <span class="n">period</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+----</span> <span class="n">Grace</span> <span class="n">period</span>
<span class="o">|</span>  <span class="o">+-------</span> <span class="n">Remaining</span> <span class="n">TTL</span>
<span class="o">+----------</span> <span class="n">VXID</span> <span class="n">of</span> <span class="n">the</span> <span class="nb">object</span>
</pre></div>
</div>
</dd>
<dt>HitMiss - Hit for miss object in cache.</dt>
<dd><p class="first">Hit-for-miss object looked up in cache.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">u</span> <span class="o">%</span><span class="n">f</span>
<span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+-</span> <span class="n">Remaining</span> <span class="n">TTL</span>
<span class="o">+----</span> <span class="n">VXID</span> <span class="n">of</span> <span class="n">the</span> <span class="nb">object</span>
</pre></div>
</div>
</dd>
<dt>HitPass - Hit for pass object in cache.</dt>
<dd><p class="first">Hit-for-pass object looked up in cache.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">u</span> <span class="o">%</span><span class="n">f</span>
<span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+-</span> <span class="n">Remaining</span> <span class="n">TTL</span>
<span class="o">+----</span> <span class="n">VXID</span> <span class="n">of</span> <span class="n">the</span> <span class="nb">object</span>
</pre></div>
</div>
</dd>
<dt>HttpGarbage - Unparseable HTTP request</dt>
<dd>Logs the content of unparseable HTTP requests.</dd>
<dt>Length - Size of object body</dt>
<dd>Logs the size of a fetch object body.</dd>
<dt>Link - Links to a child VXID</dt>
<dd><p class="first">Links this VXID to any child VXID it initiates.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Reason</span>
<span class="o">|</span>  <span class="o">+----</span> <span class="n">Child</span> <span class="n">vxid</span>
<span class="o">+-------</span> <span class="n">Child</span> <span class="nb">type</span> <span class="p">(</span><span class="s2">&quot;req&quot;</span> <span class="ow">or</span> <span class="s2">&quot;bereq&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>LostHeader - Failed attempt to set HTTP header</dt>
<dd>Logs the header name of a failed HTTP header operation due to resource exhaustion or configured limits.</dd>
<dt>Notice - Informational messages about request handling</dt>
<dd>Informational log messages on events occured during request handling. Lines are prefixed with either [core] or [&lt;VMOD name&gt;]. See the NOTICE MESSAGES section below or the individual VMOD manual pages for detailed information of notice messages.</dd>
<dt>ObjHeader - Object  header</dt>
<dd><p class="first">HTTP header contents.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span><span class="p">:</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">+-</span> <span class="n">Header</span> <span class="n">value</span>
<span class="o">+-----</span> <span class="n">Header</span> <span class="n">name</span>
</pre></div>
</div>
</dd>
<dt>ObjProtocol - Object  protocol</dt>
<dd>The HTTP protocol version information.</dd>
<dt>ObjReason - Object  response</dt>
<dd>The HTTP response string received.</dd>
<dt>ObjStatus - Object  status</dt>
<dd>The HTTP status code received.</dd>
<dt>PipeAcct - Pipe byte counts</dt>
<dd><p class="first">Contains byte counters for pipe sessions.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------</span> <span class="n">Piped</span> <span class="nb">bytes</span> <span class="n">to</span> <span class="n">client</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------</span> <span class="n">Piped</span> <span class="nb">bytes</span> <span class="kn">from</span> <span class="nn">client</span>
<span class="o">|</span>  <span class="o">+-------------</span> <span class="n">Backend</span> <span class="n">request</span> <span class="n">headers</span>
<span class="o">+----------------</span> <span class="n">Client</span> <span class="n">request</span> <span class="n">headers</span>
</pre></div>
</div>
</dd>
<dt>Proxy - PROXY protocol information</dt>
<dd><p class="first">PROXY protocol information.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">d</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">server</span> <span class="n">port</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----</span> <span class="n">server</span> <span class="n">ip</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------</span> <span class="n">client</span> <span class="n">port</span>
<span class="o">|</span>  <span class="o">+----------</span> <span class="n">client</span> <span class="n">ip</span>
<span class="o">+-------------</span> <span class="n">PROXY</span> <span class="n">protocol</span> <span class="n">version</span>

<span class="n">All</span> <span class="n">fields</span> <span class="n">are</span> <span class="s2">&quot;local&quot;</span> <span class="k">for</span> <span class="n">PROXY</span> <span class="n">local</span> <span class="n">connections</span> <span class="p">(</span><span class="n">command</span> <span class="mh">0x0</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>ProxyGarbage - Unparseable PROXY request</dt>
<dd>A PROXY protocol header was unparseable.</dd>
<dt>ReqAcct - Request handling byte counts</dt>
<dd><p class="first">Contains byte counts for the request handling.
The body bytes count includes transmission overhead (ie: chunked encoding).
ESI sub-requests show the body bytes this ESI fragment including any subfragments contributed to the top level request.
The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Total</span> <span class="nb">bytes</span> <span class="n">transmitted</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----</span> <span class="n">Body</span> <span class="nb">bytes</span> <span class="n">transmitted</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------</span> <span class="n">Header</span> <span class="nb">bytes</span> <span class="n">transmitted</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------</span> <span class="n">Total</span> <span class="nb">bytes</span> <span class="n">received</span>
<span class="o">|</span>  <span class="o">+-------------</span> <span class="n">Body</span> <span class="nb">bytes</span> <span class="n">received</span>
<span class="o">+----------------</span> <span class="n">Header</span> <span class="nb">bytes</span> <span class="n">received</span>
</pre></div>
</div>
</dd>
<dt>ReqHeader - Client request header</dt>
<dd><p class="first">HTTP header contents.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span><span class="p">:</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">+-</span> <span class="n">Header</span> <span class="n">value</span>
<span class="o">+-----</span> <span class="n">Header</span> <span class="n">name</span>
</pre></div>
</div>
</dd>
<dt>ReqMethod - Client request method</dt>
<dd>The HTTP request method used.</dd>
<dt>ReqProtocol - Client request protocol</dt>
<dd>The HTTP protocol version information.</dd>
<dt>ReqStart - Client request start</dt>
<dd><p class="first">Start of request processing. Logs the client address, port number  and listener endpoint name (from the -a command-line argument).</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+--</span> <span class="n">Listener</span> <span class="n">name</span> <span class="p">(</span><span class="kn">from</span> <span class="o">-</span><span class="n">a</span><span class="p">)</span>
<span class="o">|</span>  <span class="o">+-----</span> <span class="n">Client</span> <span class="n">Port</span> <span class="n">number</span> <span class="p">(</span><span class="mi">0</span> <span class="k">for</span> <span class="n">Unix</span> <span class="n">domain</span> <span class="n">sockets</span><span class="p">)</span>
<span class="o">+--------</span> <span class="n">Client</span> <span class="n">IP4</span><span class="o">/</span><span class="mi">6</span> <span class="n">address</span> <span class="p">(</span><span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="k">for</span> <span class="n">UDS</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>ReqURL - Client request URL</dt>
<dd>The HTTP request URL.</dd>
<dt>RespHeader - Client response header</dt>
<dd><p class="first">HTTP header contents.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span><span class="p">:</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>   <span class="o">|</span>
<span class="o">|</span>   <span class="o">+-</span> <span class="n">Header</span> <span class="n">value</span>
<span class="o">+-----</span> <span class="n">Header</span> <span class="n">name</span>
</pre></div>
</div>
</dd>
<dt>RespProtocol - Client response protocol</dt>
<dd>The HTTP protocol version information.</dd>
<dt>RespReason - Client response response</dt>
<dd>The HTTP response string received.</dd>
<dt>RespStatus - Client response status</dt>
<dd>The HTTP status code received.</dd>
<dt>SessClose - Client connection closed</dt>
<dd><p class="first">SessClose is the last record for any client connection.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">f</span>
<span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+-</span> <span class="n">How</span> <span class="n">long</span> <span class="n">the</span> <span class="n">session</span> <span class="n">was</span> <span class="nb">open</span>
<span class="o">+----</span> <span class="n">Why</span> <span class="n">the</span> <span class="n">connection</span> <span class="n">closed</span>
</pre></div>
</div>
</dd>
<dt>SessError - Client connection accept failed</dt>
<dd><p class="first">Accepting a client connection has failed.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Detailed</span> <span class="n">error</span> <span class="n">message</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----</span> <span class="n">Error</span> <span class="n">Number</span> <span class="p">(</span><span class="n">errno</span><span class="p">)</span> <span class="kn">from</span> <span class="nn">accept</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------</span> <span class="n">File</span> <span class="n">descriptor</span> <span class="n">number</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------</span> <span class="n">Local</span> <span class="n">TCP</span> <span class="n">port</span> <span class="o">/</span> <span class="mi">0</span> <span class="k">for</span> <span class="n">UDS</span>
<span class="o">|</span>  <span class="o">+-------------</span> <span class="n">Local</span> <span class="n">IPv4</span><span class="o">/</span><span class="mi">6</span> <span class="n">address</span> <span class="o">/</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span> <span class="k">for</span> <span class="n">UDS</span>
<span class="o">+----------------</span> <span class="n">Socket</span> <span class="n">name</span> <span class="p">(</span><span class="kn">from</span> <span class="o">-</span><span class="n">a</span> <span class="n">argument</span><span class="p">)</span>

<span class="n">NOTE</span><span class="p">:</span> <span class="n">This</span> <span class="n">tag</span> <span class="ow">is</span> <span class="n">currently</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">use</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">Varnish</span> <span class="n">log</span><span class="o">.</span>
<span class="n">It</span> <span class="ow">is</span> <span class="n">mentioned</span> <span class="n">here</span> <span class="n">to</span> <span class="n">document</span> <span class="n">legacy</span> <span class="n">versions</span> <span class="n">of</span> <span class="n">the</span> <span class="n">log</span><span class="p">,</span>
<span class="ow">or</span> <span class="n">reserved</span> <span class="k">for</span> <span class="n">possible</span> <span class="n">use</span> <span class="ow">in</span> <span class="n">future</span> <span class="n">versions</span><span class="o">.</span>
</pre></div>
</div>
</dd>
<dt>SessOpen - Client connection opened</dt>
<dd><p class="first">The first record for a client connection, with the socket-endpoints of the connection.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">d</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">File</span> <span class="n">descriptor</span> <span class="n">number</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----</span> <span class="n">Local</span> <span class="n">TCP</span> <span class="n">port</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------</span> <span class="n">Local</span> <span class="n">IPv4</span><span class="o">/</span><span class="mi">6</span> <span class="n">address</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+----------</span> <span class="n">Socket</span> <span class="n">name</span> <span class="p">(</span><span class="kn">from</span> <span class="o">-</span><span class="n">a</span> <span class="n">argument</span><span class="p">)</span>
<span class="o">|</span>  <span class="o">+-------------</span> <span class="n">Remote</span> <span class="n">TCP</span> <span class="n">port</span>
<span class="o">+----------------</span> <span class="n">Remote</span> <span class="n">IPv4</span><span class="o">/</span><span class="mi">6</span> <span class="n">address</span>
</pre></div>
</div>
</dd>
<dt>Storage - Where object is stored</dt>
<dd><p class="first">Type and name of the storage backend the object is stored in.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+-</span> <span class="n">Name</span> <span class="n">of</span> <span class="n">storage</span> <span class="n">backend</span>
<span class="o">+----</span> <span class="n">Type</span> <span class="p">(</span><span class="s2">&quot;malloc&quot;</span><span class="p">,</span> <span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;persistent&quot;</span> <span class="n">etc</span><span class="o">.</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt>TTL - TTL set on object</dt>
<dd><p class="first">A TTL record is emitted whenever the ttl, grace or keep values for an object is set as well as whether the object is  cacheable or not.</p>
<p>The format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="p">[</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">u</span> <span class="o">%</span><span class="n">u</span> <span class="p">]</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>    <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>    <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>    <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>    <span class="o">+-</span> <span class="s2">&quot;cacheable&quot;</span> <span class="ow">or</span> <span class="s2">&quot;uncacheable&quot;</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>    <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+------</span> <span class="n">Max</span><span class="o">-</span><span class="n">Age</span> <span class="kn">from</span> <span class="nn">Cache</span><span class="o">-</span><span class="n">Control</span> <span class="n">header</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>    <span class="o">|</span>  <span class="o">|</span>  <span class="o">+---------</span> <span class="n">Expires</span> <span class="n">header</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>    <span class="o">|</span>  <span class="o">+------------</span> <span class="n">Date</span> <span class="n">header</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>    <span class="o">+---------------</span> <span class="n">Age</span> <span class="p">(</span><span class="n">incl</span> <span class="n">Age</span><span class="p">:</span> <span class="n">header</span> <span class="n">value</span><span class="p">)</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+--------------------</span> <span class="n">Reference</span> <span class="n">time</span> <span class="k">for</span> <span class="n">TTL</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-----------------------</span> <span class="n">Keep</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+--------------------------</span> <span class="n">Grace</span>
<span class="o">|</span>  <span class="o">+-----------------------------</span> <span class="n">TTL</span>
<span class="o">+--------------------------------</span> <span class="s2">&quot;RFC&quot;</span><span class="p">,</span> <span class="s2">&quot;VCL&quot;</span> <span class="ow">or</span> <span class="s2">&quot;HFP&quot;</span>
</pre></div>
</div>
<p>The four optional fields are only present in “RFC” headers.</p>
<p>Examples:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">RFC</span> <span class="mi">60</span> <span class="mi">10</span> <span class="o">-</span><span class="mi">1</span> <span class="mi">1312966109</span> <span class="mi">1312966109</span> <span class="mi">1312966109</span> <span class="mi">0</span> <span class="mi">60</span> <span class="n">cacheable</span>
<span class="n">VCL</span> <span class="mi">120</span> <span class="mi">10</span> <span class="mi">0</span> <span class="mi">1312966111</span> <span class="n">uncacheable</span>
<span class="n">HFP</span> <span class="mi">2</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">1312966113</span> <span class="n">uncacheable</span>
</pre></div>
</div>
</dd>
<dt>Timestamp - Timing information</dt>
<dd><p class="first">Contains timing information for the Varnish worker threads.</p>
<p>Time stamps are issued by Varnish on certain events, and show the absolute time of the event, the time spent since the start of the work unit, and the time spent since the last timestamp was logged. See the TIMESTAMPS section below for information about the individual time stamps.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span><span class="p">:</span> <span class="o">%</span><span class="n">f</span> <span class="o">%</span><span class="n">f</span> <span class="o">%</span><span class="n">f</span>
<span class="o">|</span>   <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>   <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Time</span> <span class="n">since</span> <span class="n">last</span> <span class="n">timestamp</span>
<span class="o">|</span>   <span class="o">|</span>  <span class="o">+----</span> <span class="n">Time</span> <span class="n">since</span> <span class="n">start</span> <span class="n">of</span> <span class="n">work</span> <span class="n">unit</span>
<span class="o">|</span>   <span class="o">+-------</span> <span class="n">Absolute</span> <span class="n">time</span> <span class="n">of</span> <span class="n">event</span>
<span class="o">+-----------</span> <span class="n">Event</span> <span class="n">label</span>
</pre></div>
</div>
</dd>
<dt>VCL_Error - VCL execution error message</dt>
<dd>Logs error messages generated during VCL execution.</dd>
<dt>VCL_Log - Log statement from VCL</dt>
<dd>User generated log messages insert from VCL through std.log()</dd>
<dt>VCL_acl - VCL ACL check results</dt>
<dd>Logs VCL ACL evaluation results.</dd>
<dt>VCL_call - VCL method called</dt>
<dd>Logs the VCL method name when a VCL method is called.</dd>
<dt>VCL_return - VCL method return value</dt>
<dd>Logs the VCL method terminating statement.</dd>
<dt>VCL_trace - VCL trace data</dt>
<dd><p class="first">Logs VCL execution trace data.</p>
<p>The format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">u</span> <span class="o">%</span><span class="n">u</span><span class="o">.%</span><span class="n">u</span><span class="o">.%</span><span class="n">u</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">VCL</span> <span class="n">program</span> <span class="n">line</span> <span class="n">position</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>  <span class="o">+----</span> <span class="n">VCL</span> <span class="n">program</span> <span class="n">line</span> <span class="n">number</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+-------</span> <span class="n">VCL</span> <span class="n">program</span> <span class="n">source</span> <span class="n">index</span>
<span class="o">|</span>  <span class="o">+----------</span> <span class="n">VCL</span> <span class="n">trace</span> <span class="n">point</span> <span class="n">index</span>
<span class="o">+-------------</span> <span class="n">VCL</span> <span class="n">configname</span>
</pre></div>
</div>
<p class="last">NB: This log record is masked by default.</p>
</dd>
<dt>VCL_use - VCL in use</dt>
<dd><p class="first">Records the name of the VCL being used.</p>
<p>The format is:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="p">[</span> <span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">s</span> <span class="p">]</span>
<span class="o">|</span>    <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>    <span class="o">|</span>  <span class="o">+-</span> <span class="n">Name</span> <span class="n">of</span> <span class="n">label</span> <span class="n">used</span> <span class="n">to</span> <span class="n">find</span> <span class="n">it</span>
<span class="o">|</span>    <span class="o">+----</span> <span class="s2">&quot;via&quot;</span>
<span class="o">+---------</span> <span class="n">Name</span> <span class="n">of</span> <span class="n">VCL</span> <span class="n">put</span> <span class="ow">in</span> <span class="n">use</span>
</pre></div>
</div>
</dd>
<dt>VSL - VSL API warnings and error message</dt>
<dd>Warnings and error messages generated by the VSL API while reading the shared memory log.</dd>
<dt>VfpAcct - Fetch filter accounting</dt>
<dd><p class="first">Contains name of VFP and statistics.</p>
<p>The format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">s</span> <span class="o">%</span><span class="n">d</span> <span class="o">%</span><span class="n">d</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">|</span>  <span class="o">+-</span> <span class="n">Total</span> <span class="nb">bytes</span> <span class="n">produced</span>
<span class="o">|</span>  <span class="o">+----</span> <span class="n">Number</span> <span class="n">of</span> <span class="n">calls</span> <span class="n">made</span>
<span class="o">+-------</span> <span class="n">Name</span> <span class="n">of</span> <span class="nb">filter</span>
</pre></div>
</div>
<p class="last">NB: This log record is masked by default.</p>
</dd>
<dt>Witness - Lock order witness records</dt>
<dd>Diagnostic recording of locking order.</dd>
<dt>WorkThread - Logs thread start/stop events</dt>
<dd><p class="first">Logs worker thread creation and termination events.</p>
<p>The format is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="n">p</span> <span class="o">%</span><span class="n">s</span>
<span class="o">|</span>  <span class="o">|</span>
<span class="o">|</span>  <span class="o">+-</span> <span class="p">[</span><span class="n">start</span><span class="o">|</span><span class="n">end</span><span class="p">]</span>
<span class="o">+----</span> <span class="n">Worker</span> <span class="n">struct</span> <span class="n">pointer</span>
</pre></div>
</div>
<p class="last">NB: This log record is masked by default.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="timestamps">
<h3>TIMESTAMPS<a class="headerlink" href="#timestamps" title="Permalink to this headline">¶</a></h3>
<p>Timestamps are inserted in the log on completing certain events during
the worker thread’s task handling. The timestamps has a label showing
which event was completed. The reported fields show the absolute time
of the event, the time spent since the start of the task and the time
spent since the last timestamp was logged.</p>
<p>The timestamps logged automatically by Varnish are inserted after
completing events that are expected to have delays (e.g. network IO or
spending time on a waitinglist). Timestamps can also be inserted from
VCL using the std.timestamp() method. If one is doing time consuming
tasks in the VCL configuration, it’s a good idea to log a timestamp
after completing that task. This keeps the timing information in
subsequent timestamps from including the time spent on the VCL event.</p>
<div class="section" id="request-handling-timestamps">
<h4>Request handling timestamps<a class="headerlink" href="#request-handling-timestamps" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Start</dt>
<dd>The start of request processing (first byte received or
restart).</dd>
<dt>Req</dt>
<dd>Complete client request received.</dd>
<dt>ReqBody</dt>
<dd>Client request body processed (discarded, cached or passed to
the backend).</dd>
<dt>Waitinglist</dt>
<dd>Came off waitinglist.</dd>
<dt>Fetch</dt>
<dd>Fetch processing finished (completely fetched or ready for
streaming).</dd>
<dt>Process</dt>
<dd>Processing finished, ready to deliver the client response.</dd>
<dt>Resp</dt>
<dd>Delivery of response to the client finished.</dd>
<dt>Restart</dt>
<dd>Client request is being restarted.</dd>
</dl>
</div>
<div class="section" id="pipe-handling-timestamps">
<h4>Pipe handling timestamps<a class="headerlink" href="#pipe-handling-timestamps" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Pipe</dt>
<dd>Opened a pipe to the backend and forwarded the request.</dd>
<dt>PipeSess</dt>
<dd>The pipe session has finished.</dd>
</dl>
</div>
<div class="section" id="backend-fetch-timestamps">
<h4>Backend fetch timestamps<a class="headerlink" href="#backend-fetch-timestamps" title="Permalink to this headline">¶</a></h4>
<dl class="docutils">
<dt>Start</dt>
<dd>Start of the backend fetch processing.</dd>
<dt>Bereq</dt>
<dd>Backend request sent.</dd>
<dt>Beresp</dt>
<dd>Backend response headers received.</dd>
<dt>BerespBody</dt>
<dd>Backend response body received.</dd>
<dt>Retry</dt>
<dd>Backend request is being retried.</dd>
<dt>Error</dt>
<dd>Backend request failed to vcl_backend_error.</dd>
</dl>
</div>
</div>
<div class="section" id="notice-messages">
<h3>NOTICE MESSAGES<a class="headerlink" href="#notice-messages" title="Permalink to this headline">¶</a></h3>
<p>Notice messages contain informational messages about the handling of a
request. These can be exceptional circumstances encountered that causes
deviation from the normal handling. The messages are prefixed with [core]
for core Varnish generated messages, or with [&lt;VMOD name&gt;] for VMOD
generated messages. The [core] messages are described in detail below, see
the individual VMOD documentation for messages from VMODs.</p>
<dl class="docutils">
<dt>[core] Conditional fetch wait for streaming object</dt>
<dd>The backend answered 304 Not Modified on a conditional fetch using
an object that has not yet been fully fetched as the stale
template object. This can only happen when the TTL of the object
is less than the time it takes to fetch it. The fetch is halted
until the stale object is fully fetched, upon which the new object
is created as normal. While waiting, any grace time on the stale
object will be in effect.</dd>
</dl>
</div>
<div class="section" id="history">
<h3>HISTORY<a class="headerlink" href="#history" title="Permalink to this headline">¶</a></h3>
<p>This document was initially written by Poul-Henning Kamp, and later updated by
Martin Blix Grydeland.</p>
</div>
<div class="section" id="see-also">
<h3>SEE ALSO<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference internal" href="varnishhist.html#varnishhist-1"><span class="std std-ref">varnishhist</span></a></li>
<li><a class="reference internal" href="varnishlog.html#varnishlog-1"><span class="std std-ref">varnishlog</span></a></li>
<li><a class="reference internal" href="varnishncsa.html#varnishncsa-1"><span class="std std-ref">varnishncsa</span></a></li>
<li><a class="reference internal" href="varnishtop.html#varnishtop-1"><span class="std std-ref">varnishtop</span></a></li>
</ul>
</div>
<div class="section" id="copyright">
<h3>COPYRIGHT<a class="headerlink" href="#copyright" title="Permalink to this headline">¶</a></h3>
<p>This document is licensed under the same licence as Varnish
itself. See LICENCE for details.</p>
<ul class="simple">
<li>Copyright (c) 2006 Verdens Gang AS</li>
<li>Copyright (c) 2006-2015 Varnish Software AS</li>
</ul>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">VSL</a><ul>
<li><a class="reference internal" href="#varnish-shared-memory-logging">Varnish Shared Memory Logging</a><ul>
<li><a class="reference internal" href="#overview">OVERVIEW</a><ul>
<li><a class="reference internal" href="#vsl-tags">VSL tags</a></li>
</ul>
</li>
<li><a class="reference internal" href="#timestamps">TIMESTAMPS</a><ul>
<li><a class="reference internal" href="#request-handling-timestamps">Request handling timestamps</a></li>
<li><a class="reference internal" href="#pipe-handling-timestamps">Pipe handling timestamps</a></li>
<li><a class="reference internal" href="#backend-fetch-timestamps">Backend fetch timestamps</a></li>
</ul>
</li>
<li><a class="reference internal" href="#notice-messages">NOTICE MESSAGES</a></li>
<li><a class="reference internal" href="#history">HISTORY</a></li>
<li><a class="reference internal" href="#see-also">SEE ALSO</a></li>
<li><a class="reference internal" href="#copyright">COPYRIGHT</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="varnish-counters.html"
                        title="previous chapter">varnish-counters</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="vsl-query.html"
                        title="next chapter">vsl-query</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/vsl.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="vsl-query.html" title="vsl-query"
             >next</a> |</li>
        <li class="right" >
          <a href="varnish-counters.html" title="varnish-counters"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Varnish version 6.0.7 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >The Varnish Reference Manual</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2010-2014, Varnish Software AS.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.4.
    </div>
  </body>
</html>